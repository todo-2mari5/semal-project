<!DOCTYPE html>
<html lang="ja">
    <head>
        <!-- Required meta tags -->
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

        <!-- Bootstrap CSS -->
        <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/css/bootstrap.min.css"
            integrity="sha384-9gVQ4dYFwwWSjIDZnLEWnxCjeSWFphJiwGPXr1jddIhOegiu1FwO5qRGvFXOdJZ4" crossorigin="anonymous">
        <link rel="stylesheet" href="../../static/css/practice.css">

        <title>JavaScriptの練習</title>
    </head>
<body>
    <button type="button" name="button" id="button">これisボタン</button>
    <div id="posts" class="row">
      <div class="box" style="background-color: pink;">
          <div class="con">
              <p class="date">2019/06/06</p>
          </div>
      </div>
      <div class="box" style="background-color: red;">
          <div class="con">
              <p class="date">2019/06/17</p>
          </div>
      </div>
      <div class="box" style="background-color: green;">
          <div class="con">
              <p class="date">2019/10/06</p>
          </div>
      </div>
      <div class="box" style="background-color: blue;">
          <div class="con">
              <p class="date">2019/06/20</p>
          </div>
      </div>
      <div class="box" style="background-color: yellow;">
          <div class="con">
              <p class="date">2019/06/07</p>
          </div>
      </div>
    </div>
    <div id="test">

    </div>
    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.0/umd/popper.min.js" integrity="sha384-cs/chFZiN24E4KMATLdqdvsezGxaGsi4hLGOzlXwp5UZB1LY//20VyM2taTB4QvJ" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/js/bootstrap.min.js" integrity="sha384-uefMccjFJAIv6A+rW+L4AHf99KvxDjWSu1z9VI8SKNVmz4sk7buKt/6v9KI65qnm" crossorigin="anonymous"></script>
    <!-- Optional JavaScript -->
    <script>
        let posts = document.getElementById('posts');
        let boxies = posts.getElementsByClassName('box');
        let post_list = Array.prototype.slice.call(boxies);

        function compare(prop){
          return function(a,b){
            if( a.getElementsByClassName(prop)[0].textContent > b.getElementsByClassName(prop)[0].textContent){
                return 1;
            }else if( a.getElementsByClassName(prop)[0].textContent < b.getElementsByClassName(prop)[0].textContent ){
                return -1;
            }
            return 0;
          }
        }

        let sorted_list = post_list.slice().sort(compare("date"));
        let lists = [sorted_list, post_list];

        $('#button').click(function(){
            let target_list = lists[0];
            $.when(
                $('#posts').fadeOut(150)
            ).done(function(){
                for (let i=0; i<target_list.length;i++){
                    $('#posts').append(target_list[i]).hide().fadeIn(150);
                };
            });
            lists = lists.reverse();
        });
    </script>
</body>
</html>
